# çˆ¬è™«å®šæ—¶ä»»åŠ¡ä½¿ç”¨æŒ‡å—

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- `run_daily_crawl.py` - Pythonå®šæ—¶ä»»åŠ¡è„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰
- `setup_crontab.sh` - Linux/Macå®šæ—¶ä»»åŠ¡é…ç½®è„šæœ¬
- `setup_windows_task.bat` - Windowså®šæ—¶ä»»åŠ¡é…ç½®è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windows ç³»ç»Ÿ

1. **åŒå‡»è¿è¡Œé…ç½®è„šæœ¬**
   ```
   setup_windows_task.bat
   ```

2. **ä»»åŠ¡ç®¡ç†**
   ```cmd
   # æŸ¥çœ‹ä»»åŠ¡
   schtasks /Query /TN "RecycleCrawlerDaily"
   
   # ç«‹å³è¿è¡Œï¼ˆæµ‹è¯•ï¼‰
   schtasks /Run /TN "RecycleCrawlerDaily"
   
   # åˆ é™¤ä»»åŠ¡
   schtasks /Delete /TN "RecycleCrawlerDaily" /F
   ```

### Linux/Mac ç³»ç»Ÿ

1. **è¿è¡Œé…ç½®è„šæœ¬**
   ```bash
   cd /path/to/monitor_price
   chmod +x setup_crontab.sh
   ./setup_crontab.sh
   ```

2. **ä»»åŠ¡ç®¡ç†**
   ```bash
   # æŸ¥çœ‹æ‰€æœ‰å®šæ—¶ä»»åŠ¡
   crontab -l
   
   # ç¼–è¾‘å®šæ—¶ä»»åŠ¡
   crontab -e
   
   # æ‰‹åŠ¨æµ‹è¯•è¿è¡Œ
   python3 run_daily_crawl.py
   ```

## â° å®šæ—¶è®¾ç½®

é»˜è®¤é…ç½®ï¼š**æ¯å¤©æ—©ä¸Š 6:00** è‡ªåŠ¨è¿è¡Œ

å¦‚éœ€ä¿®æ”¹æ—¶é—´ï¼š
- **Windows**: é‡æ–°è¿è¡Œ `setup_windows_task.bat`ï¼Œæˆ–ä½¿ç”¨ä»»åŠ¡è®¡åˆ’ç¨‹åºGUI
- **Linux**: ç¼–è¾‘ crontab `crontab -e`

### Crontab æ—¶é—´æ ¼å¼è¯´æ˜
```
* * * * * å‘½ä»¤
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€ æ˜ŸæœŸ (0-7, 0å’Œ7éƒ½ä»£è¡¨å‘¨æ—¥)
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€ æœˆä»½ (1-12)
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€ æ—¥æœŸ (1-31)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0-59)
```

**ç¤ºä¾‹ï¼š**
```bash
0 6 * * *    # æ¯å¤©æ—©ä¸Š6:00
0 */6 * * *  # æ¯6å°æ—¶æ‰§è¡Œä¸€æ¬¡
0 8,18 * * * # æ¯å¤©ä¸Šåˆ8ç‚¹å’Œä¸‹åˆ6ç‚¹
```

## ğŸ“Š æ‰§è¡Œçš„çˆ¬è™«

è„šæœ¬ä¼šæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹çˆ¬è™«ï¼š
1. `suning_phone` - è‹å®æ‰‹æœºå›æ”¶ä»·æ ¼
2. `suning_computer` - è‹å®ç”µè„‘å›æ”¶ä»·æ ¼

çˆ¬è™«ä¹‹é—´é—´éš” 10 ç§’ã€‚

## ğŸ“ æ—¥å¿—æŸ¥çœ‹

### æ—¥å¿—ä½ç½®
```
monitor_price/logs/
â”œâ”€â”€ crawl_20260213.log  # æŒ‰æ—¥æœŸå‘½åçš„è¯¦ç»†æ—¥å¿—
â”œâ”€â”€ cron.log            # å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¥å¿—ï¼ˆLinuxï¼‰
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
tail -f logs/crawl_$(date +%Y%m%d).log

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -n 100 logs/crawl_*.log

# Windows
type logs\crawl_*.log
```

## ğŸ”§ æ‰‹åŠ¨è¿è¡Œ

å¦‚éœ€ç«‹å³æµ‹è¯•æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š

### æ–¹å¼1ï¼šè¿è¡ŒPythonè„šæœ¬
```bash
cd monitor_price
python run_daily_crawl.py
```

### æ–¹å¼2ï¼šç›´æ¥è¿è¡ŒScrapy
```bash
cd monitor_price
scrapy crawl suning_phone
scrapy crawl suning_computer
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒè¦æ±‚**
   - Python 3.8+
   - å·²å®‰è£… Scrapy å’Œç›¸å…³ä¾èµ–
   - æ•°æ®åº“è¿æ¥æ­£å¸¸

2. **æƒé™é—®é¢˜ï¼ˆLinuxï¼‰**
   ```bash
   chmod +x run_daily_crawl.py
   chmod +x setup_crontab.sh
   ```

3. **è·¯å¾„é—®é¢˜**
   - ç¡®ä¿è„šæœ¬ä¸­çš„è·¯å¾„æ­£ç¡®
   - å®šæ—¶ä»»åŠ¡ä½¿ç”¨ç»å¯¹è·¯å¾„

4. **æ—¥å¿—æ¸…ç†**
   - å®šæœŸæ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶
   - å»ºè®®ä¿ç•™æœ€è¿‘30å¤©çš„æ—¥å¿—

## ğŸ› æ•…éšœæ’æŸ¥

### 1. å®šæ—¶ä»»åŠ¡æœªæ‰§è¡Œ

**æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ˜¯å¦å­˜åœ¨ï¼š**
```bash
# Windows
schtasks /Query /TN "RecycleCrawlerDaily"

# Linux
crontab -l | grep run_daily_crawl
```

**æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼š**
```bash
# Windows - æŸ¥çœ‹ä»»åŠ¡è®¡åˆ’ç¨‹åºå†å²è®°å½•
eventvwr.msc

# Linux - æŸ¥çœ‹ cron æ—¥å¿—
sudo tail -f /var/log/syslog | grep CRON
```

### 2. çˆ¬è™«æ‰§è¡Œå¤±è´¥

**æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š**
```bash
cat logs/crawl_$(date +%Y%m%d).log
```

**å¸¸è§åŸå› ï¼š**
- æ•°æ®åº“è¿æ¥å¤±è´¥
- ç½‘ç»œé—®é¢˜
- Python ç¯å¢ƒé—®é¢˜

### 3. æƒé™é—®é¢˜ï¼ˆLinuxï¼‰

```bash
# ç»™äºˆæ‰§è¡Œæƒé™
chmod +x run_daily_crawl.py

# æ£€æŸ¥æ—¥å¿—ç›®å½•æƒé™
ls -la logs/
```

## ğŸ“¦ éƒ¨ç½²åˆ°æœåŠ¡å™¨

è¯¦è§ [DEPLOYMENT_GUIDE.md](../DEPLOYMENT_GUIDE.md)

---

**æœ€åæ›´æ–°**: 2026-02-13
**ç‰ˆæœ¬**: v1.0
